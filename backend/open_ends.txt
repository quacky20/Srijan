ğŸ§¾ Merchandise & Order Management â€” Implementation Plan
ğŸ§© 1. Merchandise Schema (merch.model.js)

Fields:

type: {
  type: String,
  enum: ["hoodie", "tshirt", "hoodie+tshirt"],
  required: true
},
price: {
  type: Number,
  required: true,
  enum: [399, 799, 1099] // Corresponding to type
}


Logic:

Price can be auto-set based on the selected type before saving.

ğŸ“¦ 2. Order Schema (order.model.js)

Fields:

type: {
  type: String,
  enum: ["hoodie", "tshirt", "hoodie+tshirt"],
  required: true
},
quantity: {
  type: Number,
  required: true,
  min: 1
},
size: {
  type: String,
  enum: ["S", "M", "L", "XL", "XXL"],
  required: true
},
totalPrice: {
  type: Number,
  required: true
},
status: {
  type: String,
  enum: ["on way", "delivered"],
  default: "on way"
},
user: {
  type: mongoose.Schema.Types.ObjectId,
  ref: "User",
  required: true
}


Logic:

totalPrice = quantity Ã— merch.price

Automatically associate user during order creation.

ğŸ‘¤ 3. Update User Schema (user.model.js)

Add new field:

orders: [
  {
    type: mongoose.Schema.Types.ObjectId,
    ref: "Order"
  }
]

âš™ï¸ 4. API Endpoints
â• Create Order â€” POST /api/orders

Functionality:

Takes input: { type, quantity, size }

Fetches price from merchandise type.

Calculates total price.

Creates new order document.

Adds order _id to the userâ€™s orders array.

Example Request Body:

{
  "type": "hoodie",
  "quantity": 2,
  "size": "L"
}


Flow:

Validate merchandise type.

Calculate total price.

Create order.

Push order ID into user.orders.

(Future) Initiate payment with Razorpay or Visa.

ğŸ“‹ Get Order Status â€” GET /api/orders/status

Functionality:

Returns all orders of the logged-in user with current status.

Response Example:

[
  {
    "type": "tshirt",
    "quantity": 1,
    "size": "M",
    "totalPrice": 799,
    "status": "on way"
  }
]

ğŸ”„ Change Order Status (Admin Only) â€” PATCH /api/orders/:id/status

Functionality:

Allows only admins to change status from "on way" â†’ "delivered".

Example Request Body:

{
  "status": "delivered"
}

ğŸ’³ 5. Payment Integration (Future Step)

Placeholder:

Integrate Razorpay / Visa later.

Add payment status fields in order schema:

paymentId: String,
paymentStatus: {
  type: String,
  enum: ["pending", "paid"],
  default: "pending"
}